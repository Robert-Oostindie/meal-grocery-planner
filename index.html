<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Meal & Grocery Planner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app-shell">
    <header>
      <div class="app-title">
        Meal Planner
        <span class="sub">Meals ‚Ä¢ Pantry ‚Ä¢ Stores ‚Ä¢ Extras ‚Ä¢ Groceries</span>
      </div>
      <div class="pill">Weekly Groceries</div>
    </header>

    <main>
      <!-- MEALS TAB -->
      <section id="tab-meals">
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Add a Meal</div>
              <div class="card-subtitle">
                Define meals and their ingredients once, reuse every week.
              </div>
            </div>
          </div>
          <div class="mt-4">
            <label for="meal-name">Meal name</label>
            <input id="meal-name" type="text" placeholder="e.g. Chicken Burrito Bowl" />
          </div>
          <div class="mt-4">
            <label for="meal-notes">Notes (optional)</label>
            <textarea id="meal-notes" placeholder="e.g. Kids love this ‚Ä¢ Use on Tuesdays"></textarea>
          </div>
          <div class="mt-6" style="display:flex; justify-content:flex-end;">
            <button class="btn btn-primary" id="add-meal-btn">
              <span>Ôºã Add Meal</span>
            </button>
          </div>
          <div class="inline-note">
            Tip: After adding a meal, open it below to attach ingredients, stores, and substitutes.
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Saved Meals</div>
              <div class="card-subtitle">
                Substitute groups let you swap ingredients week by week.
              </div>
            </div>
            <span class="badge" id="meal-count-badge">0 meals</span>
          </div>
          <div id="meal-list" class="meal-list"></div>
          <div id="meals-empty-state" class="muted mt-4">
            No meals yet. Add your first meal above.
          </div>
        </div>
      </section>

      <!-- PLANNER TAB -->
      <section id="tab-planner" class="hidden">
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Weekly Plan</div>
              <div class="card-subtitle">
                Select meals for this week. You‚Äôll pick substitutes before generating the list.
              </div>
            </div>
            <span class="badge"><span>üóìÔ∏è</span> Week</span>
          </div>
          <div id="planner-meals"></div>
          <div id="planner-empty" class="muted">
            Add some meals first on the <strong>Meals</strong> tab.
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Generate Grocery List</div>
              <div class="card-subtitle">
                Uses selected meals, extras, and pantry. You‚Äôll choose options for each substitute group.
              </div>
            </div>
          </div>
          <p class="section-note">
            When you're ready for this week's shopping, tap the button below.
          </p>
          <button class="btn btn-primary" id="generate-list-btn">
            <span>üõí Generate Grocery List</span>
          </button>
          <p class="inline-note">
            Your list will be grouped by store under the <strong>Groceries</strong> tab.
          </p>
        </div>
      </section>

      <!-- PANTRY TAB -->
      <section id="tab-pantry" class="hidden">
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Pantry & Fridge</div>
              <div class="card-subtitle">
                Mark what you already have. The app skips these items when building the list.
              </div>
            </div>
            <span class="badge"><span>‚úÖ</span> Have It</span>
          </div>
          <p class="section-note">
            Items come from the ingredients in your meals. Check the box if it's currently stocked.
          </p>
          <div class="mt-4">
            <label for="pantry-search">Filter ingredients</label>
            <input id="pantry-search" type="text" placeholder="e.g. chicken, pasta‚Ä¶" />
          </div>
          <hr class="divider" />
          <div id="pantry-list"></div>
          <div id="pantry-empty" class="muted">
            No ingredients yet. Add some ingredients to your meals on the <strong>Meals</strong> tab.
          </div>
        </div>
      </section>

      <!-- STORES TAB -->
      <section id="tab-stores" class="hidden">
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Stores</div>
              <div class="card-subtitle">
                Manage places you shop: Aldi, Walmart, Festival Foods, Woodmans, etc.
              </div>
            </div>
            <span class="badge"><span>üè¨</span> Locations</span>
          </div>
          <div class="mt-4 row">
            <div>
              <label for="store-name">Add store</label>
              <input id="store-name" type="text" placeholder="e.g. Aldi" />
            </div>
            <div style="display:flex; align-items:flex-end;">
              <button class="btn btn-primary btn-sm" id="add-store-btn">
                <span>Ôºã Add</span>
              </button>
            </div>
          </div>
          <div class="inline-note">
            These stores appear in ingredient dropdowns, extras, and grocery list groups.
          </div>
          <hr class="divider" />
          <div class="tag-list" id="store-list"></div>
        </div>

        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Data & Storage</div>
              <div class="card-subtitle">Your data lives in this browser only.</div>
            </div>
          </div>
          <p class="section-note">
            Everything is stored locally using <code>localStorage</code>. Clearing your browser data will
            remove meals, extras, pantry, and lists.
          </p>
          <div class="mt-6" style="display:flex; gap:8px; flex-wrap:wrap;">
            <button class="btn btn-outline btn-sm" id="export-data-btn">
              <span>üì§ Export Data</span>
            </button>
            <button class="btn btn-danger btn-sm" id="reset-app-btn">
              <span>üß® Reset App</span>
            </button>
          </div>
          <p id="export-status" class="inline-note"></p>
        </div>
      </section>

      <!-- EXTRAS TAB -->
      <section id="tab-extras" class="hidden">
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Extra Items</div>
              <div class="card-subtitle">
                Add non-meal items like laundry soap, shampoo, hairspray, paper towels, etc.
              </div>
            </div>
            <span class="badge"><span>‚ûï</span> Extras</span>
          </div>

          <div class="mt-4">
            <label for="extra-name">Item name</label>
            <input id="extra-name" type="text" placeholder="e.g. Laundry soap" />
          </div>
          <div class="mt-4 row">
            <div>
              <label for="extra-qty">Quantity (optional)</label>
              <input id="extra-qty" type="text" placeholder="e.g. 1, 2" />
            </div>
            <div>
              <label for="extra-unit">Unit</label>
              <input id="extra-unit" type="text" value="CT" />
            </div>
          </div>
          <div class="mt-4">
            <label for="extra-store">Store (optional)</label>
            <select id="extra-store"></select>
          </div>
          <div class="mt-6" style="display:flex; justify-content:flex-end;">
            <button class="btn btn-primary btn-sm" id="add-extra-btn">
              <span>Ôºã Add Extra Item</span>
            </button>
          </div>
          <div class="inline-note">
            Extras are included in the grocery list when the ‚ÄúInclude‚Äù box is checked.
          </div>
          <hr class="divider" />
          <div id="extras-list"></div>
          <div id="extras-empty" class="muted">
            No extra items yet. Add something above.
          </div>
        </div>
      </section>

      <!-- GROCERY LIST TAB -->
      <section id="tab-groceries" class="hidden">
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Groceries by Store</div>
              <div class="card-subtitle">
                Checklist view of everything you need, grouped by store.
              </div>
            </div>
            <span class="badge"><span>üõí</span> List</span>
          </div>
          <div class="mt-4" style="display:flex; gap:8px; flex-wrap:wrap;">
            <button class="btn btn-outline btn-sm" id="refresh-from-plan-btn">
              <span>‚Üª Refresh from Plan</span>
            </button>
            <button class="btn btn-ghost btn-sm" id="clear-checks-btn">
              <span>‚òëÔ∏è Clear Checks</span>
            </button>
          </div>
          <div class="inline-note">
            If you change your weekly meals, extras, or pantry, tap
            <strong>Refresh from Plan</strong>.
          </div>
          <hr class="divider" />
          <div id="grocery-groups"></div>
          <div id="grocery-empty" class="muted">
            No grocery list yet. Go to the <strong>Planner</strong> tab and tap
            <strong>Generate Grocery List</strong>.
          </div>
        </div>
      </section>
    </main>

    <!-- Bottom navigation -->
    <nav class="tabbar">
      <button class="tab-btn active" data-tab="meals">
        <span class="icon">üçΩÔ∏è</span>
        <span>Meals</span>
      </button>
      <button class="tab-btn" data-tab="planner">
        <span class="icon">üóìÔ∏è</span>
        <span>Planner</span>
      </button>
      <button class="tab-btn" data-tab="pantry">
        <span class="icon">‚úÖ</span>
        <span>Pantry</span>
      </button>
      <button class="tab-btn" data-tab="stores">
        <span class="icon">üè¨</span>
        <span>Stores</span>
      </button>
      <button class="tab-btn" data-tab="extras">
        <span class="icon">‚ûï</span>
        <span>Extras</span>
      </button>
      <button class="tab-btn" data-tab="groceries">
        <span class="icon">üõí</span>
        <span>Groceries</span>
      </button>
    </nav>

    <!-- Ingredient modal -->
    <div id="ingredient-modal" class="modal-backdrop hidden">
      <div class="modal-sheet">
        <div class="modal-handle"></div>
        <div class="modal-header">
          <div class="modal-title" id="ingredient-modal-title">Add Ingredient</div>
          <button class="btn btn-ghost btn-sm" id="ingredient-cancel">Close ‚úï</button>
        </div>
        <div class="mt-4">
          <label for="ingredient-name">Ingredient name</label>
          <input id="ingredient-name" type="text" placeholder="e.g. Chicken thighs, Frozen chicken" />
        </div>
        <div class="mt-4 row">
          <div>
            <label for="ingredient-qty">Quantity (optional)</label>
            <input id="ingredient-qty" type="text" placeholder="e.g. 2, 1.5" />
          </div>
          <div>
            <label for="ingredient-unit">Unit</label>
            <input id="ingredient-unit" type="text" value="CT" />
          </div>
        </div>
        <div class="mt-4">
          <label for="ingredient-store">Store (optional)</label>
          <select id="ingredient-store"></select>
          <div class="inline-note">
            Store list comes from the <strong>Stores</strong> tab.
          </div>
        </div>
        <div class="mt-4">
          <label for="ingredient-group">Substitute group (optional)</label>
          <input id="ingredient-group" list="ingredient-group-suggestions" placeholder="e.g. Protein, Pasta Noodle Type" />
          <datalist id="ingredient-group-suggestions"></datalist>
          <div class="inline-note">
            Ingredients with the same group name are substitutes. One option per group will be used for the grocery list.
          </div>
        </div>
        <div class="mt-4 checkbox-row">
          <input id="ingredient-default" type="checkbox" />
          <span class="muted">Use this as the default option for this group</span>
        </div>
        <div class="modal-actions">
          <button class="btn btn-outline btn-sm" id="ingredient-cancel-2">Cancel</button>
          <button class="btn btn-primary btn-sm" id="ingredient-save">Save Ingredient</button>
        </div>
      </div>
    </div>

    <!-- Substitute selection modal -->
    <div id="subs-modal" class="modal-backdrop hidden">
      <div class="modal-sheet">
        <div class="modal-handle"></div>
        <div class="modal-header">
          <div class="modal-title">Choose substitutes for this week</div>
          <button class="btn btn-ghost btn-sm" id="subs-cancel">Close ‚úï</button>
        </div>
        <div id="subs-modal-body" class="mt-4"></div>
        <div class="inline-note">
          Substitutes are grouped by meal. Only the selected option in each group will be added to the grocery list.
        </div>
        <div class="modal-actions">
          <button class="btn btn-outline btn-sm" id="subs-cancel-2">Cancel</button>
          <button class="btn btn-primary btn-sm" id="subs-apply">Use These Choices</button>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
